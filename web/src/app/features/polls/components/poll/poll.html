<div class="poll-wrapper">
  <div tuiPlatform="web">
    <div tuiAppearance="floating" tuiCardLarge class="poll-card" tuiTheme="dark">
      <header tuiHeader>
        <h2 tuiTitle class="title">
          {{ pollData.title }}
        </h2>
      </header>

      @if(!voted) {
        <section animate.leave="leave-animation">
          <form [formGroup]="pollForm">
            @for (option of pollData.options; track option.id) {
            <label tuiLabel class="option">
              <input
                formControlName="option"
                type="radio"
                tuiRadio
                [value]="option.id"
              />
              <span>{{ option.name }}</span>
            </label>
            }
          </form>
        </section>
      } @else {
        <section class="result" animate.enter="enter-animation">
        <div class="option-votes">
          <div class="percentage">
            <span>50%</span>
          </div>
          <div class="progress">
            <strong>Imaginary</strong>
            <progress
              size="m"
              tuiProgressBar
              [max]="100"
              [value]="50"
              [color]="'var(--tui-background-accent-2)'"
            ></progress>
          </div>
        </div>

        <div class="option-votes">
          <div class="percentage">
            <span>30%</span>
          </div>
          <div class="progress">
            <strong>Imaginary</strong>
            <progress
              size="m"
              tuiProgressBar
              [max]="100"
              [value]="30"
              [color]="'var(--tui-background-accent-1)'"
            ></progress>
          </div>
        </div>

        <div class="option-votes">
          <div class="percentage">
            <span>5%</span>
          </div>
          <div class="progress">
            <strong>My Immortal</strong>
            <progress
              size="m"
              tuiProgressBar
              [max]="100"
              [value]="5"
              [color]="'var(--tui-text-action)'"
            ></progress>
          </div>
        </div>

        <div class="option-votes">
          <div class="percentage">
            <span>15%</span>
          </div>
          <div class="progress">
            <strong>Imaginary</strong>
            <progress
              size="m"
              tuiProgressBar
              [max]="100"
              [value]="15"
              [color]="'var(--tui-text-negative-hover)'"
            ></progress>
          </div>
        </div>
      </section>
      }
        

      <footer>
        <div class="poll-info">
          <span class="text-muted">Total de Votos: {{totalVotes}}</span>
          <tui-pin class="pin bg-muted" />
          <span class="text-muted">{{daysRemaining}} dias restantes</span>
        </div>
        <div class="action">
          <button tuiButton size="m" (click)="vote()">Votar</button>
        </div>
      </footer>
    </div>
  </div>
</div>
